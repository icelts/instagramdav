{% extends "base.html" %}
{% block content %}
<div class="header">
  <div class="brand">
    <div class="dot"></div>
    <div>
      <h1 class="page-title">ç•™è¨€æ¿</h1>
      <p class="page-subtitle">æäº¤é—®é¢˜ä¸å»ºè®®ï¼Œæˆ‘ä»¬ä¼šé€šè¿‡é‚®ä»¶å›å¤</p>
    </div>
  </div>
  <div class="detail-actions">
    <a href="/">è¿”å›é¦–é¡µ</a>
  </div>
</div>

{% if status %}
<div class="notice success">{{ status }}</div>
{% endif %}
{% if error %}
<div class="notice error">{{ error }}</div>
{% endif %}

<div class="panel">
  <div class="panel-head">
    <div>
      <p class="panel-title">âœ‰ï¸ å‘é€ç•™è¨€</p>
      <p class="panel-sub">å¡«å†™é‚®ç®±ï¼Œæ–¹ä¾¿æˆ‘ä»¬ç›´æ¥å›å¤</p>
    </div>
  </div>
  <form method="post" action="/guestbook" class="form">
    <div class="form-inline">
      <label>æ˜µç§°
        <input name="name" required placeholder="ä½ çš„ç§°å‘¼">
      </label>
      <label>é‚®ç®±
        <input name="email" type="email" required placeholder="ç”¨äºå›å¤">
      </label>
    </div>
    <label>ç•™è¨€å†…å®¹
      <textarea name="content" rows="5" required placeholder="è¯·æè¿°ä½ çš„é—®é¢˜æˆ–å»ºè®®"></textarea>
    </label>
    <button type="submit">æäº¤ç•™è¨€</button>
  </form>
</div>

<div class="panel">
  <div class="panel-head">
    <div>
      <p class="panel-title">ğŸ“ æœ€æ–°ç•™è¨€</p>
      <p class="panel-sub">æœ€è¿‘ 50 æ¡ç•™è¨€</p>
    </div>
  </div>
  {% if messages %}
  <div class="message-list">
    {% for item in messages %}
    <div class="message-card">
      <div class="message-meta">
        <span>{{ item.name }}</span>
        <span class="muted">{{ item.created_at.strftime('%Y-%m-%d %H:%M') if item.created_at else '' }}</span>
      </div>
      <div class="message-content">{{ item.content }}</div>
    </div>
    {% endfor %}
  </div>
  {% else %}
  <div class="muted" style="padding: 16px 0;">æš‚æ— ç•™è¨€</div>
  {% endif %}
</div>
{% endblock %}
